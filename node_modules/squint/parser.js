var deliminators = new RegExp( '.*?[;{}]', 'g' )
  , util = require( 'util' ) 
  , EventEmitter = require( 'events' ).EventEmitter;

function Parser() {

  EventEmitter.call( this );

  this.process = function( code ) {
    var matches = code.match( deliminators );
    
    if (matches) {
      var emitter = this;
      
      matches.forEach( function( match ) {
        var source = match.slice( 0, match.length - 1 ).trim();
        switch (match[ match.length - 1 ]) {
          case ';':
            emitter.emit( 'statement', source );    
            break;
          case '{':
            emitter.emit( 'open', source );    
            break;
          case '}':
            emitter.emit( 'close', source );    
            break;
        }
      } ); 
    }
  }; 
}; 

Parser.prototype = new EventEmitter();

module.exports.Parser = Parser;
