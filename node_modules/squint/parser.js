var deliminators = new RegExp( '.*?[;{}]', 'g' )
  , EventsEmitter = require( 'events/events' ).EventsEmitter;

function Parser() {

  EventsEmitter.call( this );

  this.process = function( code ) {
    var matches = code.match( deliminators );
    
    if (matches) {
      matches.forEach( function( match ) {
        var source = match.slice( 0, match.length - 1 ).trim();
        switch (match[ match.length - 1 ]) {
          case ';':
            this.emit( 'statement', source );    
            break;
          case '{':
            this.emit( 'open', source );    
            break;
          case '}':
            this.emit( 'close', source );    
            break;
        }
      } ); 
    }
  }; 
}; 

Parser.prototype = new EventsEmitter();

module.exports.Parser = Parser;
