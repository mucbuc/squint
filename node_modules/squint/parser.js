var deliminators = new RegExp( '.*?[;{}]', 'g' )
  , util = require( 'util' ) 
  , EventEmitter = require( 'events' ).EventEmitter;

function Parser() {
  
  var parser = this;
  
  EventEmitter.call( this );
  
  this.parse = function( code ) {
    var matches = code.match( deliminators );
   
    if (matches) {
      
      matches.forEach( function( match ) {
        var source = match.slice( 0, match.length - 1 ).trim();
        switch (match[ match.length - 1 ]) {
          case ';':
            parser.emit( 'statement', source );    
            break;
          case '{':
            parser.emit( 'open', source );    
            break;
          case '}':
            parser.emit( 'close', source );    
            break;
        }
      } ); 
    }
  }; 
}; 

Parser.prototype = new EventEmitter();

module.exports.Parser = Parser;
