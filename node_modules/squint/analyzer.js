var namespaceDeclare = new RegExp( 'namespace\\s*\\w*\\s*', 'g' )
  , namespaceDeclarator = new RegExp( 'namespace\\s*', 'g' )
  , typeDeclare = new RegExp( '.*>\\s*(class|struct)' )
  , typeDeclarator = new RegExp( '.' );

function Analyzer( emitter ) {
  
  emitter.on( 'open', function( code ) {
    if (code.search( namespaceDeclare ) != -1) {
      var name = code.replace( namespaceDeclarator, '' );
      emitter.emit( 'open namespace', name );
    }
    else if (code.search( typeDeclare ) != -1) {
      emitter.emit( 'open type', '' );
    }
  } );
}

module.exports.Analyzer = Analyzer; 